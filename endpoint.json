{
	"lastUpdated": "2025-10-03",
	"services": [
		{
			"name": "Gateway",
			"description": "Forwards requests to registered backend microservices and applies shared policies.",
			"port": 3000,
			"baseUrl": "http://gateway:3000",
			"routes": [
				{
					"method": "ANY",
					"path": "/:serviceName/*",
					"authRequired": null,
					"description": "Forwards the incoming request.",
					"notes": "Service specific config can be added."
				}
			]
		},
		{
			"name": "Authentication Service",
			"description": "Handles user registration, login, verification.",
			"port": 3001,
			"baseUrl": "http://authentication:3001",
			"gatewayPrefix": "/auth",
			"routes": [
				{
					"method": "GET",
					"path": "/health",
					"authRequired": false,
					"description": "Service health probe returning uptime metadata."
				},
				{
					"method": "GET",
					"path": "/check-email",
					"authRequired": false,
					"description": "Check if an email address is already registered (expects `email` query parameter)."
				},
				{
					"method": "GET",
					"path": "/check-username",
					"authRequired": false,
					"description": "Check if a username is already registered (expects `username` query parameter)."
				},
				{
					"method": "POST",
					"path": "/register",
					"authRequired": false,
					"description": "Create a new user account and trigger email verification."
				},
				{
					"method": "POST",
					"path": "/login",
					"authRequired": false,
					"description": "Authenticate an existing user with username/email and password; issues JWT tokens + cookies."
				},
				{
					"method": "GET",
					"path": "/verify-email",
					"authRequired": false,
					"description": "Verify user email using a token supplied via query string (token lifecycle stored in-memory)."
				},
				{
					"method": "POST",
					"path": "/verify-email",
					"authRequired": false,
					"description": "Verify user email using a token supplied in the request body."
				},
				{
					"method": "POST",
					"path": "/verify-2fa",
					"authRequired": false,
					"description": "Validate a 6-digit 2FA code that was emailed to the user."
				},
				{
					"method": "GET",
					"path": "/me",
					"authRequired": true,
					"description": "Return the authenticated user's profile details (JWT required)."
				},
				{
					"method": "GET",
					"path": "/profile",
					"authRequired": true,
					"description": "Alias for `/me` that also returns the authenticated profile payload."
				},
				{
					"method": "POST",
					"path": "/logout",
					"authRequired": true,
					"description": "Invalidate the JWT cookie for the currently authenticated user."
				}
			]
		},
		{
			"name": "Email Service",
			"description": "Responsible for transactional emails such as verification, login alerts, 2FA, and password resets.",
			"port": 3005,
			"baseUrl": "http://email:3005",
			"gatewayPrefix": "/email",
			"routes": [
				{
					"method": "GET",
					"path": "/health",
					"authRequired": false,
					"description": "Health probe confirming the email service is reachable."
				},
				{
					"method": "GET",
					"path": "/test",
					"authRequired": false,
					"description": "Simple diagnostic endpoint returning static service metadata."
				},
				{
					"method": "GET",
					"path": "/test-connection",
					"authRequired": false,
					"description": "Connectivity check that delegates to `EmailController.testConnection`."
				},
				{
					"method": "POST",
					"path": "/send-2fa",
					"authRequired": false,
					"description": "Send a 2FA code email (expects `email`, `username`, `code`, `ip`)."
				},
				{
					"method": "POST",
					"path": "/send-welcome",
					"authRequired": false,
					"description": "Send the welcome/onboarding email after successful registration."
				},
				{
					"method": "POST",
					"path": "/send-login-notification",
					"authRequired": false,
					"description": "Send a security alert when a login occurs."
				},
				{
					"method": "POST",
					"path": "/send-deletion-code",
					"authRequired": false,
					"description": "Send a confirmation code for account deletion workflows."
				},
				{
					"method": "POST",
					"path": "/send-deletion-confirmation",
					"authRequired": false,
					"description": "Notify the user that their account deletion has been processed."
				},
				{
					"method": "POST",
					"path": "/send-password-reset",
					"authRequired": false,
					"description": "Send a password reset link/code email."
				},
				{
					"method": "POST",
					"path": "/send-verification",
					"authRequired": false,
					"description": "Send a general verification email, used by the authentication service."
				}
			]
		},
		{
			"name": "Friend Service",
			"description": "Manages friend requests, blocking, and friend list retrieval.",
			"port": 3007,
			"baseUrl": "http://friend:3007",
			"gatewayPrefix": null,
			"routes": [
				{
					"method": "POST",
					"path": "/send",
					"authRequired": false,
					"description": "Create a pending friend request between `userid` and `peerid`."
				},
				{
					"method": "POST",
					"path": "/accept",
					"authRequired": false,
					"description": "Accept a pending friend request identified by `peerid`."
				},
				{
					"method": "POST",
					"path": "/block",
					"authRequired": false,
					"description": "Block or create a blocked relationship between two users."
				},
				{
					"method": "POST",
					"path": "/remove",
					"authRequired": false,
					"description": "Remove an existing friendship between `userid` and `peerid`."
				},
				{
					"method": "GET",
					"path": "/list",
					"authRequired": false,
					"description": "Return accepted friends for the provided `id` query parameter."
				},
				{
					"method": "DELETE",
					"path": "/list",
					"authRequired": false,
					"description": "Delete friend records associated with the supplied `UserName` in the body."
				}
			]
		},
		{
			"name": "Profile Service",
			"description": "Provides profile reads/updates and internal match history aggregation.",
			"port": 3006,
			"baseUrl": "http://profile:3006",
			"gatewayPrefix": "/profile",
			"routes": [
				{
					"method": "GET",
					"path": "/profile",
					"authRequired": false,
					"description": "Fetch profile + stats for `UserName` provided in the request body."
				},
				{
					"method": "PUT",
					"path": "/profile",
					"authRequired": false,
					"description": "Update profile fields (`displayName`, `bio`, `avatarUrl`) for the given `UserName`."
				},
				{
					"method": "DELETE",
					"path": "/profile",
					"authRequired": false,
					"description": "Delete the profile for `UserName` and trigger cascading deletes in friend/auth services."
				},
				{
					"method": "POST",
					"path": "/internal/match",
					"authRequired": false,
					"description": "Internal endpoint used by the game server to persist match history records."
				},
				{
					"method": "POST",
					"path": "/internal/tournament",
					"authRequired": false,
					"description": "Placeholder endpoint for tournament data ingestion (currently unimplemented)."
				},
				{
					"method": "GET",
					"path": "/internal/stats",
					"authRequired": false,
					"description": "Placeholder endpoint for aggregated statistics (currently unimplemented)."
				}
			],
			"notes": "Profile service currently expects JSON bodies even for GET requests; consider migrating to query params."
		},
		{
			"name": "Room Service",
			"description": "Acts as the WebSocket hub connecting game clients and the game server.",
			"port": 3004,
			"baseUrl": "ws://room:3004",
			"gatewayPrefix": null,
			"routes": [
				{
					"method": "WS",
					"path": "/ws/client",
					"authRequired": false,
					"description": "Client-facing WebSocket for gameplay messaging."
				},
				{
					"method": "WS",
					"path": "/ws/server",
					"authRequired": false,
					"description": "Internal WebSocket endpoint used by the game server to exchange events."
				}
			]
		},
		{
			"name": "Game Server",
			"description": "Real-time game orchestration WebSocket server handling rooms, matches, and tournaments.",
			"port": 3002,
			"baseUrl": "ws://gameserver:3002",
			"gatewayPrefix": null,
			"routes": [
				{
					"method": "WS",
					"path": "/ws",
                    "notes": "can be change to /ws/game or /ws/match",
					"authRequired": false,
					"description": "Single WebSocket endpoint; clients must supply `id` and `name` as query parameters during handshake."
				}
			]
		},
		{
			"name": "AI Server",
			"description": "Python WebSocket service that provides AI paddle decisions for ping-pong gameplay.",
			"port": 3003,
			"baseUrl": "ws://aiserver:3003",
			"gatewayPrefix": null,
			"routes": [
				{
					"method": "WS",
					"path": "/",
					"authRequired": false,
					"description": "WebSocket endpoint accepting game state JSON messages (use the `--websocket` startup flag)."
				}
			]
		}
	]
}
